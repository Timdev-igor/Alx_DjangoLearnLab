{% extends 'denver_blog/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">

  <!-- Upload Button -->
  <a class="btn btn-outline-dark mb-4" href="{% url 'upload' %}">Upload Photo</a>

  <!-- Category Filter -->
  <form method="get" class="mb-4">
    <select name="category" onchange="this.form.submit()" class="form-select" style="max-width: 300px;">
      <option value="">All Categories</option>
      {% for cat in categories %}
        <option value="{{ cat.id }}" {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
          {{ cat.name }}
        </option>
      {% endfor %}
    </select>
  </form>

  <!-- Image Gallery Grid -->
  <div class="gallery-grid">
    {% for photo in photos %}
      <div class="gallery-item">
        <a href="{% url 'photo_detail' photo.pk %}">
          <img src="{{ photo.image.url }}" alt="Photo" class="img-fluid rounded shadow">
        </a>
        {% if photo.title %}
          <div class="">{{ photo.title }}</div>
        {% endif %}
        <div>
          <a href="{% url 'photo_detail' photo.pk %}" class="read-btn">details</a>
        </div>
      </div>
    {% empty %}
      <p>No photos available.</p>
    {% endfor %}
  </div>

</div>
{% endblock %}
